import java.sql._
import org.springframework.jdbc.core._

trait ArticleUtils {
	import org.json4s._
	import org.json4s.JsonDSL._
	import org.json4s.jackson.JsonMethods._

	private def getFiles(db: JdbcTemplate, container: Int): Map[String, Seq[(Long, String, String)]] = {
		query(db)("select * from files where container=? and not deleted", container) {
			case (row: ResultSet, index: Integer) ⇒
				(row.getString("sort"), row.getLong("id"), row.getString("name"), row.getString("original_name"))
		} groupBy { _._1 } mapValues { _ map { v ⇒ (v._2, v._3, v._4) } }
	}

}
